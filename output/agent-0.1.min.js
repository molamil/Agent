(function(b){var a={_registry:[],observe:function(){var f=this._buildRequest.apply(this,arguments);if(!f.success){return}var d=f.o,j=f.fName,l=f.hook,n=f.thisContext,m=f.priority,e,h,k;e=d[j];if(e!=undefined&&(typeof e!="function")){this._warn('The provided function name "'+j+'" does not reference a function but a '+(typeof d[j])+" - this member should be changed at runtime to a function in order to avoid unexpected results")}h=false;for(var g=0;g<this._registry.length;g++){var c=this._registry[g];if(c.o===d&&c.fName==j){k=c;h=true;break}}if(!h){k=this._createProxy(d,j)}this._addHook(k,l,n,m)},ignore:function(){var f=this._buildRequest.apply(this,arguments);if(!f.success){return}var l=f.o,h=f.fName,g=f.hook,e;for(var d=0;d<this._registry.length;d++){var k=this._registry[d];if(k.o===l&&k.fName==h){for(var c=0;c<k.hooks.length;c++){if(k.hooks[c].f===g){e=true;k.hooks.splice(c,1);break}}}}if(!e){this._warn("There is no matching function to remove on "+h)}},_buildRequest:function(){if(typeof arguments[0]!="object"&&typeof arguments[0]!="string"){this._warn("The first parameter to observe/ignore should be either an object (that holds the function to be observed/ignored) or a string (the function name to be obeserved/ignored, taking window as the default object), no hook will be processed");return}var f=(typeof arguments[0]=="string"),e={o:f?b:arguments[0],fName:f?arguments[0]:arguments[1],hook:f?arguments[1]:arguments[2],thisContext:null,priority:0,success:true};if(arguments.length>(f?2:3)){var d=f?(arguments[2]):(arguments[3]),c=f?(arguments[3]):(arguments[4]);if(d&&typeof d=="object"){e.thisContext=d;if(c&&typeof c=="number"){e.priority=c}}else{if(typeof d=="number"){e.priority=d}}}if(typeof e.o!="object"){this._warn("No object to observe, no hook will be processed");e.success=false}else{if(typeof e.fName!="string"){this._warn("There was no function name string provided to observe, no hook will be processed");e.success=false}else{if(typeof e.hook!="function"){this._warn("There was no hook function provided to observe, no hook will be processed");e.success=false}}}return e},_createProxy:function(f,e){var d=f[e],c={o:f,fName:e,hooks:[]};this._addHook(c,d,0);c.original=d;this._registry.push(c);return c},_buildProxy:function(c){c.o[c.fName]=function(){for(var d=c.hooks.length-1;d>=0;d--){var e=c.hooks[d];e.f.apply(e.thisContext||this,arguments)}}},_addHook:function(j,g,o,l){if(!g){return}if(j.original===g){this._warn("You cannot observe a function to itself: "+g);return}var c=0,m=false;for(var d=0;d<j.hooks.length;d++){var e=j.hooks[d];if(e.f===g){m=true;break}if(e.priority<l){c=d+1}}if(m){this._warn("Hook already exists, will not be added: "+g)}else{var k={f:g,thisContext:o,priority:l};j.hooks.splice(c,0,k)}this._buildProxy(j)},_warn:function(c){if(b.console&&typeof b.console.warn=="function"){b.console.warn(c)}}};b.Agent=a})(this);